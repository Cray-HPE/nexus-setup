#!/usr/bin/env bash

# Copyright 2022 Hewlett Packard Enterprise Development LP

command -v curl >/dev/null 2>&1 || { echo >&2 "command not found: curl"; exit 1; }

. "$(dirname "$0")/nexus-curl-auth"

URL="${NEXUS_URL}/service/rest"

# Verify Nexus is up
if ! curl -sfk "${URL}/v1/status/writable" >/dev/null 2>&1; then
    echo >&2 "error: not ready: $NEXUS_URL"
    exit 1
fi
