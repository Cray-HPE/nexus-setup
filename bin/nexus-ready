#!/bin/bash

# Copyright 2020 Hewlett Packard Enterprise Development LP

command -v curl >/dev/null 2>&1 || { echo >&2 "command not found: curl"; exit 1; }

URL="${NEXUS_URL:="http://admin:admin123@localhost:8081"}/service/rest"

# Verify Nexus is up
if ! curl -sfk "${URL}/v1/status/writable" >/dev/null 2>&1; then
    echo >&2 "error: not ready: $NEXUS_URL"
    exit 1
fi
